<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Installing with customizations using Helm charts :: RHACS Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
    <script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../../..">RHACS Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhacs" data-version="3.64">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Red Hat Advance Cluster Security for Kubernetes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../index.html">Welcome</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Release notes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes/364-release-notes.html">Relase notes for RHACS 3.64</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes/363-release-notes.html">Release notes for RHACS 3.63</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes/3062-release-notes.html">Release notes for RHACS 3.0.62</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes/3061-release-notes.html">Release notes for RHACS 3.0.61</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes/3060-release-notes.html">Release notes for RHACS 3.0.60</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes/3059-release-notes.html">Release notes for RHACS 3.0.59</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../release_notes/3058-release-notes.html">Release notes for RHACS 3.0.58</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../architecture/index.html">Product architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../prerequisites.html">Installation prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-ocp-operator.html">Installing by using an Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installing by using Helm charts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="install-helm-quick.html">Installing quickly</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="install-helm-customization.html">Installing with customizations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../install-quick-roxctl.html">Installing quickly by using the roxctl CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../uninstall-acs.html">Uninstalling RHACS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuring</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/add-custom-certificates.html">Adding custom certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/add-trusted-ca.html">Adding trusted certificate authorities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/reissue-internal-certificates.html">Reissuing internal certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/add-security-notices.html">Adding security notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/enable-offline-mode.html">Enabling offline mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/enable-alert-data-retention.html">Enabling alert data retention</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/expose-portal-over-http.html">Exposing the RHACS portal over HTTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/configure-automatic-upgrades.html">Configuring automatic upgrades for secured clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/configure-proxy.html">Configuring a proxy for external network access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/generate-diagnostic-bundle.html">Generating a diagnostic bundle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/configure-endpoints.html">Configuring endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/monitor-acs.html">Monitoring with Prometheus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../configuration/configure-audit-logging.html">Enabling audit logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operating</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/view-dashboard.html">Viewing the dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/manage-compliance.html">Managing compliance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/evaluate-security-risks.html">Evaluating security risks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/use-admission-controller-enforcement.html">Using admission controller enforcement</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/manage-security-policies.html">Managing security policies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/manage-network-policies.html">Managing network policies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/review-cluster-configuration.html">Reviewing cluster configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/examine-images-for-vulnerabilities.html">Examining images for vulnabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/manage-vulnerabilities.html">Managing vulnerabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/respond-to-violations.html">Responding to violations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/search-filter.html">Searching and filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Managing user access</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../operating/manage-user-access/configure-okta-identity-cloud.html">Configuring Okta Identity Cloud as a SAML 2.0 identity provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../operating/manage-user-access/configure-google-workspace-identity.html">Configuring Google Workspace as an OIDC identity provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../operating/manage-user-access/manage-role-based-access-control-3630.html">Managing RBAC in Red Hat Advanced Cluster Security for Kubernetes 3.63 and newer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../operating/manage-user-access/manage-role-based-access-control-3062.html">Managing RBAC in Red Hat Advanced Cluster Security for Kubernetes 3.0.62 and older</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../operating/manage-user-access/enable-pki-authentication.html">Enabling PKI authentication</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../operating/use-system-health-dashboard.html">Using the system health dashboard</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Backup and restore</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../backup_and_restore/backing-up-acs.html">Backing up Red Hat Advanced Cluster Security for Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../backup_and_restore/restore-acs.html">Restoring from a backup</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Upgrading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../upgrading/upgrade-helm.html">Upgrading using Helm charts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Upgrading using the roxctl CLI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#upgrading_roxctl/upgrade-from-44">Upgrading from Red Hat Advanced Cluster Security for Kubernetes 3.0.44 or higher</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../cli/getting-started-cli.html">Getting started with the roxctl CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Support</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/getting-support.html">Getting support for Red Hat Advanced Cluster Security for Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../support/getting-support-stackrox.html">Getting support for the StackRox Kubernetes Security Platform</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat Advance Cluster Security for Kubernetes</span>
    <span class="version">3.64</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Red Hat Advance Cluster Security for Kubernetes</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">3.64</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Red Hat Advance Cluster Security for Kubernetes</a></li>
    <li>Installing</li>
    <li>Installing by using Helm charts</li>
    <li><a href="install-helm-customization.html">Installing with customizations</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/gaurav-nelson/rhacs-docs/edit/main/docs/modules/installing/pages/installing_helm/install-helm-customization.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Installing with customizations using Helm charts</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>High-level installation flow:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add Red Hat Advance Cluster Security for Kuberenetes Helm chart repository.</p>
</li>
<li>
<p>Configure the <code>central-services</code> Helm chart.</p>
</li>
<li>
<p>Install the <code>central-services</code> Helm chart to install the <a href="#../../architecture/index.adoc#centralized-components_acs-architecture" class="page unresolved">centralized components</a> (Central and Scanner).</p>
</li>
<li>
<p>Generate an init bundle.</p>
</li>
<li>
<p>Configure the <code>secured-cluster-services</code> Helm chart.</p>
</li>
<li>
<p>Install the <code>secured-cluster-services</code> Helm chart to install the <a href="#../../architecture/index.adoc#per-cluster-components_acs-architecture" class="page unresolved">per-cluster</a> and <a href="#../../architecture/index.adoc#per-node-components_acs-architecture" class="page unresolved">per-node</a> components (Sensor, Admission Controller, and Collector).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Before you install:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Understand <a href="#../../architecture/index.adoc" class="page unresolved">Red Hat Advance Cluster Security for Kuberenetes architecture</a>.</p>
</li>
<li>
<p>Review the <a href="../prerequisites.html#acs-general-requirements_acs-prerequisites" class="page">prerequisites for installing Red Hat Advance Cluster Security for Kuberenetes</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-helm-repository_acs-install-helm-customization"><a class="anchor" href="#adding-helm-repository_acs-install-helm-customization"></a>Adding the Helm chart repository</h2>
<div class="sectionbody">
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Add Red Hat Advance Cluster Security for Kuberenetes charts repository.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ helm repo add stackrox  https://mirror.openshift.com/pub/rhacs/charts/</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Helm repository for Red Hat Advance Cluster Security for Kuberenetes includes two Helm charts for installing different components.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Central services Helm chart (<code>central-services</code>) for installing the centralized components (Central and Scanner).</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You deploy centralized components only once and you can monitor multiple separate clusters by using the same installation.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Secured Cluster Services Helm chart (<code>secured-cluster-services</code>) for installing the per-cluster (Sensor and Admission controller) and per-node (Collector) components.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Deploy the per-cluster components into each cluster that you want to monitor and deploy the per-node components in all nodes that you want to monitor.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Run the following command to verify the added chart repository:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ helm search repo -l rhacs/</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-central-services-helm-chart"><a class="anchor" href="#configure-central-services-helm-chart"></a>Configuring the central-services Helm chart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes Helm chart configuration parameters that you can use with the <code>helm install</code> and <code>helm upgrade</code> commands.
You can specify these parameters by using the <code>--set</code> option or by creating YAML configuration files.</p>
</div>
<div class="paragraph">
<p>Create the following files for configuring the Helm chart for installing Red Hat Advance Cluster Security for Kuberenetes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Public configuration file <code>values-public.yaml</code>: Use this file to save all non-sensitive configuration options.</p>
</li>
<li>
<p>Private configuration file <code>values-private.yaml</code>: Use this file to save all sensitive configuration options. Make sure that you store this file securely.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="central-services-private-configuration-file_acs-install-helm-customization"><a class="anchor" href="#central-services-private-configuration-file_acs-install-helm-customization"></a>Private configuration file</h3>
<div class="paragraph">
<p>This section lists the configurable parameters of the <code>values-private.yaml</code> file.
There are no default values for these parameters.</p>
</div>
<div class="sect3">
<h4 id="central-services-private-configuration-file-image-pull-secrets_acs-install-helm-customization"><a class="anchor" href="#central-services-private-configuration-file-image-pull-secrets_acs-install-helm-customization"></a>Image pull secrets</h4>
<div class="paragraph">
<p>The credentials required for pulling images from your registry.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>If you are using the <code>stackrox.io</code> registry, you must specify the <code>imagePullSecrets.username</code> and <code>imagePullSecrets.password</code> parameters.</p>
</li>
<li>
<p>If you are using a custom registry, you must also specify the <code>image.registry</code> parameter.</p>
</li>
<li>
<p>If you do not use a username and password to log in to your custom registry, you must specify one of the following parameters:</p>
<div class="ulist">
<ul>
<li>
<p><code>imagePullSecrets.allowNone</code></p>
</li>
<li>
<p><code>imagePullSecrets.useExisting</code></p>
</li>
<li>
<p><code>imagePullSecrets.useFromDefaultServiceAccount</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.username</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username for your registry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password (for the selected username) of your registry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.allowNone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> if you are using a custom registry and it allows pulling images without credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.useExisting</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma-seprated list of secrets as values.
For example, <code>secret1, secret2, secretN</code>. Use this option if you have already created pre-existing image pull secrets with the given name in the target namespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.useFromDefaultServiceAccount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> if you have already configured the default service account in the target namespace with sufficiently scoped image pull secrets.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="central-services-private-configuration-file-proxy-config_acs-install-helm-customization"><a class="anchor" href="#central-services-private-configuration-file-proxy-config_acs-install-helm-customization"></a>Proxy configuration</h4>
<div class="paragraph">
<p>If you are installing Red Hat Advance Cluster Security for Kuberenetes in a cluster that requires a proxy  to connect to external services, you must specify your proxy configuration by using the <code>proxyConfig</code> parameter.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">env:
  proxyConfig: |
    url: http://proxy.name:port
    username: username
    password: password
    excludes:
    - some.domain</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.proxyConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Your proxy configuration.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="central-services-private-configuration-file-central_acs-install-helm-customization"><a class="anchor" href="#central-services-private-configuration-file-central_acs-install-helm-customization"></a>Central</h4>
<div class="paragraph">
<p>Configurable parameters for Central.</p>
</div>
<div class="paragraph">
<p>For a new installation, you can skip the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>central.jwtSigner.key</code></p>
</li>
<li>
<p><code>central.serviceTLS.cert</code></p>
</li>
<li>
<p><code>central.serviceTLS.key</code></p>
</li>
<li>
<p><code>central.adminPassword.value</code></p>
</li>
<li>
<p><code>central.adminPassword.htpasswd</code></p>
</li>
<li>
<p>When you do not specify values for these parameters the Helm chart autogenerates values for them.</p>
</li>
<li>
<p>If you want to modify these values you can use the <code>helm upgrade</code> command and specify the values using the <code>--set</code> option.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For setting the administrator password, you can only use either <code>central.adminPassword.value</code> or <code>central.adminPassword.htpasswd</code>, but not both.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.jwtSigner.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A private key which Red Hat Advance Cluster Security for Kuberenetes should use for signing JSON web tokens (JWTs) for authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.serviceTLS.cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An internal certificate that the Central service should use for deploying Central.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.serviceTLS.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The private key of the internal certificate that the Central service should use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.defaultTLS.cert</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The user-facing certificate that Central should use. Red Hat Advance Cluster Security for Kuberenetes uses this certificate for RHACS portal.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a new installation, you must provide a certificate, otherwise, Red Hat Advance Cluster Security for Kuberenetes installs Central by using a self-signed certificate.</p>
</li>
<li>
<p>If you are upgrading, Red Hat Advance Cluster Security for Kuberenetes uses the existing certificate and its key.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.defaultTLS.key</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The private key of the user-facing certificate that Central should use.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a new installation, you must provide the private key, otherwise, Red Hat Advance Cluster Security for Kuberenetes installs Central by using a self-signed certificate.</p>
</li>
<li>
<p>If you are upgrading, Red Hat Advance Cluster Security for Kuberenetes uses the existing certificate and its key.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.adminPassword.value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator password for logging into Red Hat Advance Cluster Security for Kuberenetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.adminPassword.htpasswd</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Administrator password for logging into Red Hat Advance Cluster Security for Kuberenetes.
This password is stored in hashed format using bcrypt.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you are using <code>central.adminPassword.htpasswd</code> parameter, you must use a bcrypt encoded password hash.
You can run the command <code>htpasswd -nB admin</code> to generate a password hash.
For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">htpasswd: |
  admin:&lt;bcrypt-hash&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="central-services-private-configuration-file-scanner_acs-install-helm-customization"><a class="anchor" href="#central-services-private-configuration-file-scanner_acs-install-helm-customization"></a>Scanner</h4>
<div class="paragraph">
<p>Configurable parameters for Scanner.</p>
</div>
<div class="paragraph">
<p>For a new installation, you can skip the following parameters and the Helm chart autogenerates values for them.
Otherwise, if you are upgrading to a new version, specify the values for the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>scanner.dbPassword.value</code></p>
</li>
<li>
<p><code>scanner.serviceTLS.cert</code></p>
</li>
<li>
<p><code>scanner.serviceTLS.key</code></p>
</li>
<li>
<p><code>scanner.dbServiceTLS.cert</code></p>
</li>
<li>
<p><code>scanner.dbServiceTLS.key</code></p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbPassword.value</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password to use for authentication with Scanner database.
Do not modify this parameter because Red Hat Advance Cluster Security for Kuberenetes automatically creates and uses its value internally.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.serviceTLS.cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An internal certificate that the Scanner service should use for deploying Scanner.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.serviceTLS.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The private key of the internal certificate that the Scanner service should use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbServiceTLS.cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An internal certificate that the Scanner-db service should use for deploying Scanner database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbServiceTLS.key</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The private key of the internal certificate that the Scanner-db service should use.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="central-services-public-configuration-file_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file_acs-install-helm-customization"></a>Public configuration file</h3>
<div class="paragraph">
<p>This section lists the configurable parameters of the <code>values-public.yaml</code> file.</p>
</div>
<div class="sect3">
<h4 id="central-services-public-configuration-file-image-pull-secrets_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file-image-pull-secrets_acs-install-helm-customization"></a>Image pull secrets</h4>
<div class="paragraph">
<p>Image pull secrets are the credentials required for pulling images from your registry.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.allowNone</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> if you are using a custom registry and it allows pulling images without credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.useExisting</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma-seprated list of secrets as values.
For example, <code>secret1, secret2</code>.
Use this option if you have already created pre-existing image pull secrets with the given name in the target namespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>imagePullSecrets.useFromDefaultServiceAccount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> if you have already configured the default service account in the target namespace with sufficiently scoped image pull secrets.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="central-services-public-configuration-file-image_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file-image_acs-install-helm-customization"></a>Image</h4>
<div class="paragraph">
<p>Image declares the configuration to set up the main registry, which the Helm chart uses to resolve images for the <code>central.image</code>, <code>scanner.image</code>, and <code>scanner.dbImage</code> parameters.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.registry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of your image registry.
Either use a hostname, such as <code>stackrox.io</code>, or a remote registry hostname, such as <code>us.gcr.io/stackrox-mirror</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="central-services-public-configuration-file-environment-variables_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file-environment-variables_acs-install-helm-customization"></a>Environment variables</h4>
<div class="paragraph">
<p>Red Hat Advance Cluster Security for Kuberenetes automatically detects your cluster environment and sets values for <code>env.openshift</code>, <code>env.istio</code>, and <code>env.platform</code>.
Only set these values to override the automatic cluster environment detection.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.openshift</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> for installing on an OpenShift Container Platform cluster and overriding automatic cluster environment detection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.istio</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> for installing on an Istio enabled cluster and overriding automatic cluster environment detection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.platform</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The platform on which you are installing Red Hat Advance Cluster Security for Kuberenetes.
Set its value to <code>default</code> or <code>gke</code> to specify cluster platform and override automatic cluster environment detection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env.offlineMode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to use Red Hat Advance Cluster Security for Kuberenetes in offline mode.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="central-services-public-configuration-file-central_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file-central_acs-install-helm-customization"></a>Central</h4>
<div class="paragraph">
<p>Configurable parameters for Central.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must specify a persistent storage option as either <code>hostPath</code> or <code>persistentVolumeClaim</code>.</p>
</li>
<li>
<p>For exposing Central deployment for external access.
You must specify one parameter, either <code>central.exposure.loadBalancer</code>, <code>central.exposure.nodePort</code>, or <code>central.exposure.route</code>.
When you do not specify any value for these parameters, you must manually expose Central or access it by using port-forwarding.</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.disableTelemetry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to disable online telemetry data collection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.endpointsConfig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The endpoint configuration options for Central.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.nodeSelector</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify a node selector label (as <code>label-key: label-value</code>) to force Central to only schedule on nodes with the specified label.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.image.registry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom registry that overrides the global <code>image.registry</code> parameter for the Central image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.image.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The custom image name that overrides the default Central image name (<code>main</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.image.tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The custom image tag that overrides the default tag for Central image.
If you specify you own image tag during a new installation, you must manually increment this tag when you to upgrade to a new version by running the <code>helm upgrade</code> command.
If you mirror Central images in your own registry, do not modify the original image tags.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.image.fullRef</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full reference including registry address, image name, and image tag for the Central image.
Setting a value for this parameter overrides the <code>central.image.registry</code>, <code>central.image.name</code>, and <code>central.image.tag</code> parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.resources.requests.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory request for Central to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.resources.requests.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU request for Central to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.resources.limits.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit for Central to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.resources.limits.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU limit for Central to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.persistence.hostPath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path on the node where Red Hat Advance Cluster Security for Kuberenetes should create a database volume.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.persistence.persistentVolumeClaim.claimName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the persistent volume claim (PVC) you are using.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.persistence.persistentVolumeClaim.createClaim</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to create a new persistent volume claim, or <code>false</code> to use an existing claim.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.persistence.persistentVolumeClaim.size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size (in GiB) of the persistent volume managed by the specified claim.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.exposure.loadBalancer.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to expose Central by using a load balancer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.exposure.loadBalancer.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port number on which to expose Central.
The default port number is 443.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.exposure.nodePort.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to expose Central by using the node port service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.exposure.nodePort.port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port number on which to expose Central.
When you skip this parameter, OpenShift Container Platform automatically assigns a port number.
Red Hat recommends that you do not specify a port number if you are exposing Red Hat Advance Cluster Security for Kuberenetes by using a node port.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>central.exposure.route.enabled</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to expose Central by using a route.
This parameter is only available for OpenShift Container Platform clusters.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="central-services-public-configuration-file-scanner_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file-scanner_acs-install-helm-customization"></a>Scanner</h4>
<div class="paragraph">
<p>Configurable parameters for Scanner.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.disable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to install Red Hat Advance Cluster Security for Kuberenetes without Scanner.
When you use it with the <code>helm upgrade</code> command, Helm removes existing Scanner deployment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.replicas</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of replicas to create for the Scanner deployment.
When you use it with the <code>scanner.autoscaling</code> parameter, this value sets the initial number of replicas.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.logLevel</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Configure the log level for Scanner.
Red Hat recommends that you not change the log level&#8217;s default value (<code>INFO</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.autoscaling.disable</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to disable autoscaling for Scanner deployment.
When you disable autoscaling, the <code>minReplicas</code> and <code>maxReplicas</code> parameters do not have any effect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.autoscaling.minReplicas</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The minimum number of replicas for autoscaling.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.autoscaling.maxReplicas</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of replicas for autoscaling.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.resources.requests.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory request for Scanner to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.resources.requests.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU request for Scanner to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.resources.limits.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit for Scanner to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.resources.limits.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU limit for Scanner to override the default value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbResources.requests.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory request for Scanner database deployment to override the default values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbResources.requests.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU request for Scanner database deployment to override the default values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbResources.limits.memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit for Scanner database deployment to override the default values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbResources.limits.cpu</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU limit for Scanner database deployment to override the default values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.image.registry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom registry for the Scanner image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.image.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The custom image name that overrides the default Scanner image name (<code>scanner</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbImage.registry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom registry for the Scanner DB image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scanner.dbImage.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The custom image name that overrides the default Scanner DB image name (<code>scanner-db</code>).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="central-services-public-configuration-file-customizations_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file-customizations_acs-install-helm-customization"></a>Customization</h4>
<div class="paragraph">
<p>Use these parameters to specify additional attributes for all objects that Red Hat Advance Cluster Security for Kuberenetes creates.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.labels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all objects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.annotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all objects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.podLabels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.podAnnotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.envVars</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom environment variable for all containers in all objects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.central.labels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all objects that Central creates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.central.annotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all objects that Central creates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.central.podLabels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all Central deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.central.podAnnotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all Central deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.central.envVars</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom environment variable for all Central containers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner.labels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all objects that Scanner creates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner.annotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all objects that Scanner creates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner.podLabels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all Scanner deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner.podAnnotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all Scanner deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner.envVars</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom environment variable for all Scanner containers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner-db.labels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all objects that Scanner DB creates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner-db.annotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all objects that Scanner DB creates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner-db.podLabels</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom label to attach to all Scanner DB deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner-db.podAnnotations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom annotation to attach to all Scanner DB deployments.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>customize.scanner-db.envVars</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A custom environment variable for all Scanner DB containers.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can also use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>customize.other.service/*.labels</code> and the <code>customize.other.service/*.annotations</code> parameters, to specify labels and annotations for all objects.</p>
</li>
<li>
<p>or, provide a specific service name, for example, <code>customize.other.service/central-loadbalancer.labels</code> and <code>customize.other.service/central-loadbalancer.annotations</code> as parameters and set their value.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="central-services-public-configuration-file-advance-customization_acs-install-helm-customization"><a class="anchor" href="#central-services-public-configuration-file-advance-customization_acs-install-helm-customization"></a>Advanced customization</h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The parameters specified in this section are for information only.
Red Hat does not support Red Hat Advance Cluster Security for Kuberenetes instances with modified namespace and release names.</p>
</div>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allowNonstandardNamespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to deploy Red Hat Advance Cluster Security for Kuberenetes into a namespace other than the default namespace <code>stackrox</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>allowNonstandardReleaseName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use <code>true</code> to deploy Red Hat Advance Cluster Security for Kuberenetes with a release name other than the default <code>stackrox-central-services</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-central-services-helm-chart_acs-install-helm-customization"><a class="anchor" href="#install-central-services-helm-chart_acs-install-helm-customization"></a>Installing the central-services Helm chart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you configure the <code>values-public.yaml</code> and <code>values-private.yaml</code> files, install the <code>central-services</code> Helm chart to deploy the centralized components (Central and Scanner).</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ helm install -n stackrox --create-namespace \
  stackrox-central-services stackrox/central-services \
  -f &lt;path_to_values_public.yaml&gt; -f &lt;path_to_values_private.yaml&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the <code>-f</code> option to specify the paths for your YAML configuration files.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="change-config-options-after-deployment-central-services_acs-install-helm-customization"><a class="anchor" href="#change-config-options-after-deployment-central-services_acs-install-helm-customization"></a>Changing configuration options after deploying the central-services Helm chart</h3>
<div class="paragraph">
<p>You can make changes to any configuration options after you have deployed the <code>central-services</code> Helm chart.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update the <code>values-public.yaml</code> and <code>values-private.yaml</code> configuration files with new values.</p>
</li>
<li>
<p>Run the <code>helm upgrade</code> command and specify the configuration files using the <code>-f</code> option:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ helm upgrade -n stackrox \
  stackrox-central-services stackrox/central-services \
  -f &lt;path_to_values_public.yaml&gt; \
  -f &lt;path_to_values_private.yaml&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also specify configuration values using the <code>--set</code> or <code>--set-file</code> parameters.
However, these options are not saved, and it requires you to manually specify all the options again whenever you make changes.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generate-init-bundle"><a class="anchor" href="#generate-init-bundle"></a>Generating an init bundle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To create a secured cluster, you must create an init bundle. The secured cluster uses this bundle to authenticate with Central.</p>
</div>
<div class="paragraph">
<p>You can create an init bundle by using the the <code>roxctl</code> CLI or from the RHACS portal.</p>
</div>
<div class="sect2">
<h3 id="roxctl-generate-init-bundle_acs-install-helm-customization"><a class="anchor" href="#roxctl-generate-init-bundle_acs-install-helm-customization"></a>Generating an init bundle by using the roxctl CLI</h3>
<div class="paragraph">
<p>You can create an init bundle by using the the <code>roxctl</code> CLI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have configured the <code>ROX_API_TOKEN</code> and the <code>ROX_CENTRAL_ADDRESS</code> environment variables.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the following command to generate a cluster init bundle:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ roxctl -e "$ROX_CENTRAL_ADDRESS" \
  central init-bundles generate &lt;cluster_init_bundle_name&gt; \
  --output cluster_init_bundle.yaml</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure that you store this bundle securely because it contains secrets.
You can use the same bundle to set up multiple secured clusters.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="#../../cli/getting-started-cli.adoc#installing-roxctl-cli" class="page unresolved">Installing the roxctl CLI</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="portal-generate-init-bundle_acs-install-helm-customization"><a class="anchor" href="#portal-generate-init-bundle_acs-install-helm-customization"></a>Generating an init bundle by using the RHACS portal</h3>
<div class="paragraph">
<p>You can create an init bundle by using the RHACS portal.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Find the address of the RHACS portal based on your exposure method:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For a route:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc get route central -n stackrox</code></pre>
</div>
</div>
</li>
<li>
<p>For a load balancer:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc get service central-loadbalancer -n stackrox</code></pre>
</div>
</div>
</li>
<li>
<p>For port forward:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc port-forward svc/central 18443:443 -n stackrox</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to <code>https://localhost:18443/</code>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>On the RHACS portal, navigate to <strong>Platform Configuration</strong> &#8594; <strong>Integrations</strong>.</p>
</li>
<li>
<p>Under the <strong>Authentication Tokens</strong> section, click on <strong>Cluster Init Bundle</strong>.</p>
</li>
<li>
<p>Click <strong>Generate Bundle</strong> (<strong><code>add</code></strong> icon) on the top right.</p>
</li>
<li>
<p>Enter a name for the cluster init bundle and click <strong>Generate</strong>.</p>
</li>
<li>
<p>Click <strong>Download Helm Values File</strong> to download the generated bundle.</p>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure that you store this bundle securely because it contains secrets.
You can use the same bundle to set up multiple secured clusters.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-secured-cluster-services-helm-chart"><a class="anchor" href="#configure-secured-cluster-services-helm-chart"></a>Configuring the secured-cluster-services Helm chart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes Helm chart configuration parameters that you can use with the <code>helm install</code> and <code>helm upgrade</code> commands.
You can specify these parameters by using the <code>--set</code> option or by creating YAML configuration files.</p>
</div>
<div class="paragraph">
<p>Create the following files for configuring the Helm chart for installing Red Hat Advance Cluster Security for Kuberenetes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Public configuration file <code>values-public.yaml</code>: Use this file to save all non-sensitive configuration options.</p>
</li>
<li>
<p>Private configuration file <code>values-private.yaml</code>: Use this file to save all sensitive configuration options. Make sure that you store this file securely.</p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While using the <code>secured-cluster-services</code> Helm chart, do not modify the <code>values.yaml</code> file that is part of the chart.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="secured-cluster-services-config_acs-install-helm-customization"><a class="anchor" href="#secured-cluster-services-config_acs-install-helm-customization"></a>Configuration parameters</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>clusterName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of your cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>centralEndpoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of the Central endpoint, including the port number.
If you are using a non-gRPC capable load balancer, use the WebSocket protocol by prefixing the endpoint address with <code>wss://</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sensor.endpoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of the Sensor endpoint including port number.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.main.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the <code>main</code> image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.collector.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the Collector image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.main.registry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of the registry you are using for the main image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.collector.registry</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Address of the registry you are using for the Collector image.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.main.pullPolicy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image pull policy for <code>main</code> images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.collector.pullPolicy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Image pull policy for the Collector images.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.main.tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag of <code>main</code> image to use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>image.collector.tag</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tag of <code>collector</code> image to use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collector.collectionMethod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Either <code>EBPF</code>, <code>KERNEL_MODULE</code>, or <code>NO_COLLECTION</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.listenOnCreates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting controls whether Kubernetes is configured to contact Red Hat Advance Cluster Security for Kuberenetes with <code>AdmissionReview</code> requests for workload creation events.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.listenOnUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When you keep it as <code>false</code>, Red Hat Advance Cluster Security for Kuberenetes creates the <code>ValidatingWebhookConfiguration</code> in a way that causes the Kubernetes API server not to send object update events.
Since the volume of object updates is usually higher than the object creates, leaving this as <code>false</code> limits the load on the admission control service and decreases the chances of a malfunctioning admission control service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.listenOnEvents</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting controls whether the cluster is configured to contact Red Hat Advance Cluster Security for Kuberenetes with <code>AdmissionReview</code> requests for Kubernetes <code>exec</code> and <code>portforward</code> events.
Red Hat Advance Cluster Security for Kuberenetes does not support this feature on OpenShift Container Platform.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.dynamic.enforceOnCreates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting controls whether Red Hat Advance Cluster Security for Kuberenetes evaluates policies;
if it is disabled, all AdmissionReview requests are automatically accepted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.dynamic.enforceOnUpdates</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This setting controls the behavior of the admission control service.
You must specify <code>listenOnUpdates</code> as <code>true</code> for this to work.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.dynamic.scanInline</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you set this option to <code>true</code>, the admission control service requests an image scan before making an admission decision.
Since image scans take several seconds, enable this option only if you can ensure that all images used in your cluster are scanned before deployment (for example, by a CI integration during image build).
This option corresponds to the <strong>Contact image scanners</strong> option in the RHACS Portal.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.dynamic.disableBypass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set it to <code>true</code> to disable bypassing the Admission Controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.dynamic.timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum time, in seconds, Red Hat Advance Cluster Security for Kuberenetes should wait while evaluating admission review requests.
Use this to set request timeouts when you enable image scanning.
If the image scan runs longer than the specified time, Red Hat Advance Cluster Security for Kuberenetes accepts the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>registryOverride</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use this parameter to override the default <code>docker.io</code> registry.
Specify the name of your registry if you are using some other registry.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collector.disableTaintTolerations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you specify <code>false</code>, tolerations are applied to Collector, and the Collector pods can schedule onto all nodes with taints.
If you specify it as <code>true</code>, no tolerations are applied, and the Collector pods are not scheduled onto nodes with taints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createUpgraderServiceAccount</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify <code>true</code> to create the <code>sensor-upgrader</code> account.
By default, Red Hat Advance Cluster Security for Kuberenetes creates a service account called <code>sensor-upgrader</code> in each secured cluster.
This account is highly privileged but is only used during upgrades.
If you do not create this account, you must complete future upgrades manually if the Sensor does not have enough permissions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>createSecrets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify <code>false</code> to skip the orchestrator secret creation for the Sensor, Collector, and Admission Controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collector.slimMode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specify <code>true</code> if you want to use a slim Collector image for deploying Collector.
Using slim Collector images requires Central to provide the matching kernel module or eBPF probe.
If you are running Red Hat Advance Cluster Security for Kuberenetes in offline mode, you must download a kernel support package from <a href="https://install.stackrox.io/collector/support-packages/index.html">stackrox.io</a> and upload it to Central for slim Collectors to function.
Otherwise, you must ensure that Central can access the online probe repository hosted at <a href="https://collector-modules.stackrox.io/">https://collector-modules.stackrox.io/</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sensor.resources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource specification for Sensor.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>admissionControl.resources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource specification for Admission Controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collector.resources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource specification for Collector.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collector.complianceResources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource specification for Collector&#8217;s Compliance container.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exposeMonitoring</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you set this option to <code>true</code>,  Red Hat Advance Cluster Security for Kuberenetes exposes Prometheus metrics endpoints on port number 9090 for the Sensor, Collector, and the Admission Controller.</p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="secured-cluster-services-environment-variables_acs-install-helm-customization"><a class="anchor" href="#secured-cluster-services-environment-variables_acs-install-helm-customization"></a>Environment variables</h4>
<div class="paragraph">
<p>You can specify environment variables for Sensor and Admission Controller in the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml">customize:
  envVars:
    ENV_VAR1: "value1"
    ENV_VAR2: "value2"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>customize</code> setting allows you to specify custom Kubernetes metadata (labels and annotations) for all objects created by this Helm chart and additional pod labels, pod annotations, and container environment variables for workloads.</p>
</div>
<div class="paragraph">
<p>The configuration is hierarchical, in the sense that metadata defined at a more generic scope (for example, for all objects) can be overridden by metadata defined at a narrower scope (for example, only for the Sensor deployment).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install-secured-cluster-services-helm-chart_acs-install-helm-customization"><a class="anchor" href="#install-secured-cluster-services-helm-chart_acs-install-helm-customization"></a>Installing the secured-cluster-services Helm chart</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you configure the <code>values-public.yaml</code> and <code>values-private.yaml</code> files, install the <code>secured-cluster-services</code> Helm chart to deploy the per-cluster and per-node components (Sensor, Admission Controller, and Collector).</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To install Collector on systems configured with Unified Extensible Firmware Interface (UEFI) boot, you must use eBPF probes because kernel modules are unsigned, and the UEFI firmware cannot load unsigned packages.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ helm install -n stackrox --create-namespace \
  stackrox-secured-cluster-services rhacs/secured-cluster-services \
  -f &lt;name_of_cluster_init_bundle.yaml&gt; \
  -f &lt;path_to_values_public.yaml&gt; -f &lt;path_to_values_private.yaml&gt; <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the <code>-f</code> option to specify the paths for your YAML configuration files.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>To deploy <code>secured-cluster-services</code> Helm chart by using a continuous integration (CI) system, pass the init bundle YAML file as an environment variable to the <code>helm install</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ helm install ... -f &lt;(echo "$INIT_BUNDLE_YAML_SECRET") <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If you are using base64 encoded variables, use the <code>helm install &#8230;&#8203; -f &lt;(echo "$INIT_BUNDLE_YAML_SECRET" | base64 --decode)</code> command instead.</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="change-config-options-after-deployment_acs-install-helm-customization"><a class="anchor" href="#change-config-options-after-deployment_acs-install-helm-customization"></a>Changing configuration options after deploying the secured-cluster-services Helm chart</h3>
<div class="paragraph">
<p>You can make changes to any configuration options after you have deployed the <code>secured-cluster-services</code> Helm chart.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Update the <code>values-public.yaml</code> and <code>values-private.yaml</code> configuration files with new values.</p>
</li>
<li>
<p>Run the <code>helm upgrade</code> command and specify the configuration files using the <code>-f</code> option:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ helm upgrade -n stackrox \
  stackrox-secured-cluster-services stackrox/secured-cluster-services \
  --reuse-values \ <i class="conum" data-value="1"></i><b>(1)</b>
  -f &lt;path_to_values_public.yaml&gt; \
  -f &lt;path_to_values_private.yaml&gt;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You must specify the <code>--reuse-values</code> parameter, otherwise the Helm upgrade command resets all previously configured settings.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can also specify configuration values using the <code>--set</code> or <code>--set-file</code> parameters.
However, these options are not saved, and it requires you to manually specify all the options again whenever you make changes.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="verify-acs-installation_acs-install-helm-customization"><a class="anchor" href="#verify-acs-installation_acs-install-helm-customization"></a>Verifying installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After you complete the installation, navigate to the RHACS portal and run a few vulnerable applications to evaluate the results of security assessments and policy violations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The sample applications listed in the following section contain critical vulnerabilities and they are specifically designed to verify the build and deploy-time assessment features of Red Hat Advance Cluster Security for Kuberenetes.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Find the address of the RHACS portal based on your exposure method:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>For a route:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc get route central -n stackrox</code></pre>
</div>
</div>
</li>
<li>
<p>For a load balancer:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc get service central-loadbalancer -n stackrox</code></pre>
</div>
</div>
</li>
<li>
<p>For port forward:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc port-forward svc/central 18443:443 -n stackrox</code></pre>
</div>
</div>
</li>
<li>
<p>Navigate to <code>https://localhost:18443/</code>.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Create a new project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc new-project test</code></pre>
</div>
</div>
</li>
<li>
<p>Start some applications with critical vulnerabilities:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc run shell --labels=app=shellshock,team=test-team \
  --image=vulnerables/cve-2014-6271 -n test</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc run samba --labels=app=rce \
  --image=vulnerables/cve-2017-7494 -n test</code></pre>
</div>
</div>
<div class="paragraph">
<p>Red Hat Advance Cluster Security for Kuberenetes automatically scans these deployments for security risk and policy violations as soon as they are submitted to the cluster.</p>
</div>
</li>
<li>
<p>Navigate to the RHACS portal to view the violations.
You can log in to the RHACS portal by using the default username <code>admin</code> and the generated password.</p>
</li>
</ol>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
