<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Configuring endpoints :: RHACS Docs</title>
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">RHACS Docs</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rhacs" data-version="64">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Red Hat Advance Cluster Security for Kubernetes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Welcome</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Release notes</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes/364-release-notes.html">Relase notes for RHACS 3.64</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes/363-release-notes.html">Release notes for RHACS 3.63</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes/3062-release-notes.html">Release notes for RHACS 3.0.62</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes/3061-release-notes.html">Release notes for RHACS 3.0.61</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes/3060-release-notes.html">Release notes for RHACS 3.0.60</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes/3059-release-notes.html">Release notes for RHACS 3.0.59</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../release_notes/3058-release-notes.html">Release notes for RHACS 3.0.58</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../architecture/index.html">Product architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installing/prerequisites.html">Installation prerequisites</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installing/install-ocp-operator.html">Installing by using an Operator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Installing by using Helm charts</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installing/installing_helm/install-helm-quick.html">Installing quickly</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../installing/installing_helm/install-helm-customization.html">Installing with customizations</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installing/install-quick-roxctl.html">Installing quickly by using the roxctl CLI</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../installing/uninstall-acs.html">Uninstalling RHACS</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Configuring</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add-custom-certificates.html">Adding custom certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add-trusted-ca.html">Adding trusted certificate authorities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reissue-internal-certificates.html">Reissuing internal certificates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="add-security-notices.html">Adding security notices</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="enable-offline-mode.html">Enabling offline mode</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="enable-alert-data-retention.html">Enabling alert data retention</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="expose-portal-over-http.html">Exposing the RHACS portal over HTTP</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configure-automatic-upgrades.html">Configuring automatic upgrades for secured clusters</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configure-proxy.html">Configuring a proxy for external network access</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="generate-diagnostic-bundle.html">Generating a diagnostic bundle</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="configure-endpoints.html">Configuring endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="monitor-acs.html">Monitoring with Prometheus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configure-audit-logging.html">Enabling audit logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operating</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/view-dashboard.html">Viewing the dashboard</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/manage-compliance.html">Managing compliance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/evaluate-security-risks.html">Evaluating security risks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/use-admission-controller-enforcement.html">Using admission controller enforcement</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/manage-security-policies.html">Managing security policies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/manage-network-policies.html">Managing network policies</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/review-cluster-configuration.html">Reviewing cluster configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/examine-images-for-vulnerabilities.html">Examining images for vulnabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/manage-vulnerabilities.html">Managing vulnerabilities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/respond-to-violations.html">Responding to violations</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/search-filter.html">Searching and filtering</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Managing user access</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operating/manage-user-access/configure-okta-identity-cloud.html">Configuring Okta Identity Cloud as a SAML 2.0 identity provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operating/manage-user-access/configure-google-workspace-identity.html">Configuring Google Workspace as an OIDC identity provider</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operating/manage-user-access/manage-role-based-access-control-3630.html">Managing RBAC in Red Hat Advanced Cluster Security for Kubernetes 3.63 and newer</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operating/manage-user-access/manage-role-based-access-control-3062.html">Managing RBAC in Red Hat Advanced Cluster Security for Kubernetes 3.0.62 and older</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../operating/manage-user-access/enable-pki-authentication.html">Enabling PKI authentication</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../operating/use-system-health-dashboard.html">Using the system health dashboard</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Backup and restore</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backup_and_restore/backing-up-acs.html">Backing up Red Hat Advanced Cluster Security for Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../backup_and_restore/restore-acs.html">Restoring from a backup</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Upgrading</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../upgrading/upgrade-helm.html">Upgrading using Helm charts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Upgrading using the roxctl CLI</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#upgrading_roxctl/upgrade-from-44">Upgrading from Red Hat Advanced Cluster Security for Kubernetes 3.0.44 or higher</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../cli/getting-started-cli.html">Getting started with the roxctl CLI</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Support</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../support/getting-support.html">Getting support for Red Hat Advanced Cluster Security for Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../support/getting-support-stackrox.html">Getting support for the StackRox Kubernetes Security Platform</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Red Hat Advance Cluster Security for Kubernetes</span>
    <span class="version">64</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Red Hat Advance Cluster Security for Kubernetes</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">64</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Red Hat Advance Cluster Security for Kubernetes</a></li>
    <li>Configuring</li>
    <li><a href="configure-endpoints.html">Configuring endpoints</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/gaurav-nelson/rhacs-docs/edit/main/docs/modules/configuration/pages/configure-endpoints.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Configuring endpoints</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Learn how to configure endpoints for Red Hat Advance Cluster Security for Kuberenetes (RHACS) by using a YAML configuration file.</p>
</div>
<div class="paragraph">
<p>You can use a YAML configuration file to configure exposed endpoints.
You can use this configuration file to define one or more endpoints for Red Hat Advance Cluster Security for Kuberenetes and customize the TLS settings for each endpoint, or disable the TLS for specific endpoints.
You can also define if client authentication is required, and which client certificates to accept.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="custom-yaml-configuration_configure-endpoints"><a class="anchor" href="#custom-yaml-configuration_configure-endpoints"></a>Custom YAML configuration</h2>
<div class="sectionbody">
<div class="paragraph _abstract">
<p>Red Hat Advance Cluster Security for Kuberenetes uses the YAML configuration as a <code>ConfigMap</code>, making configurations easier to change and manage.</p>
</div>
<div class="paragraph">
<p>When you use the custom YAML configuration file, you can configure the following for each endpoint:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The protocols to use, such as <code>HTTP</code>, <code>gRPC</code>, or both.</p>
</li>
<li>
<p>Enable or disable TLS.</p>
</li>
<li>
<p>Specify server certificates.</p>
</li>
<li>
<p>Client Certificate Authorities (CA) to trust for client authentication.</p>
</li>
<li>
<p>Specify if client certificate authentication (<code>mTLS</code>) is required.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the configuration file to specify endpoints either during the installation or on an existing instance of Red Hat Advance Cluster Security for Kuberenetes.
However, if you expose any additional ports other than the default port <code>8443</code>, you must create network policies that allow traffic on those additional ports.</p>
</div>
<div class="paragraph">
<p>The following is a sample <code>endpoints.yaml</code> configuration file for Red Hat Advance Cluster Security for Kuberenetes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yaml hljs" data-lang="yaml"># Sample endpoints.yaml configuration for Central.
#
# # CAREFUL: If the following line is uncommented, do not expose the default endpoint on port 8443 by default.
# #          This will break normal operation.
# disableDefault: true # if true, do not serve on :8443 <i class="conum" data-value="1"></i><b>(1)</b>
endpoints: <i class="conum" data-value="2"></i><b>(2)</b>
  # Serve plaintext HTTP only on port 8080
  - listen: ":8080" <i class="conum" data-value="3"></i><b>(3)</b>
    # Backend protocols, possible values are 'http' and 'grpc'. If unset or empty, assume both.
    protocols: <i class="conum" data-value="4"></i><b>(4)</b>
      - http
    tls: <i class="conum" data-value="5"></i><b>(5)</b>
      # Disable TLS. If this is not specified, assume TLS is enabled.
      disable: true <i class="conum" data-value="6"></i><b>(6)</b>
  # Serve HTTP and  gRPC for sensors only on port 8444
  - listen: ":8444" <i class="conum" data-value="3"></i><b>(3)</b>
    tls: <i class="conum" data-value="5"></i><b>(5)</b>
      # Which TLS certificates to serve, possible values are 'service' (For  service certificates that Red Hat Advance Cluster Security for Kuberenetes generates)
      # and 'default' (user-configured default TLS certificate). If unset or empty, assume both.
      serverCerts: <i class="conum" data-value="7"></i><b>(7)</b>
        - default
        - service
      # Client authentication settings.
      clientAuth: <i class="conum" data-value="8"></i><b>(8)</b>
        # Enforce TLS client authentication. If unset, do not enforce, only request certificates
        # opportunistically.
        required: true <i class="conum" data-value="9"></i><b>(9)</b>
        # Which TLS client CAs to serve, possible values are 'service' (CA for service
        # certificates that Red Hat Advance Cluster Security for Kuberenetes generates) and 'user' (CAs for PKI auth providers). If unset or empty, assume both.
        certAuthorities: <i class="conum" data-value="10"></i><b>(10)</b>
        # if not set, assume ["user", "service"]
          - service</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use <code>true</code> to disable exposure on the default port number <code>8443</code>.
The default value is <code>false</code>; changing it to <code>true</code> might break existing functionality.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A list of additional endpoints for exposing Central.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The address and port number on which to listen. You must specify this value if you are using <code>endpoints</code>.
You can use the format <code>port</code>, <code>:port</code>, or <code>address:port</code> to specify values.
For example,
<div class="ulist">
<ul>
<li>
<p><code>8080</code> or <code>:8080</code> - listen on port <code>8080</code> on all interfaces.</p>
</li>
<li>
<p><code>0.0.0.0:8080</code> - listen on port <code>8080</code> on all IPv4 (not IPv6) interfaces.</p>
</li>
<li>
<p><code>127.0.0.1:8080</code> - listen on port <code>8080</code> on the local loopback device only.</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Protocols to use for the specified endpoint.
Acceptable values are <code>http</code> and <code>grpc</code>.
If you do not specify a value, Central listens to both HTTP and gRPC traffic on the specified port.
If you want to expose an endpoint exclusively for the RHACS portal, use <code>http</code>.
However, you will not be able to use the endpoint for service-to-service communication or for the <code>roxctl</code> CLI, because these clients require both gRPC and HTTP.
Red Hat recommends that you do not specify a value of this key, to enable both HTTP and gRPC protocols for the endpoint.
If you want to restrict an endpoint to Red Hat Advance Cluster Security for Kuberenetes services only, use the <strong>clientAuth</strong> option.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Use it to specify the TLS settings for the endpoint.
If you do not specify a value, Red Hat Advance Cluster Security for Kuberenetes enables TLS with the default settings for all the following nested keys.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use <code>true</code> to disable TLS on the specified endpoint.
The default value is <code>false</code>.
When you set it to <code>true</code>, you cannot specify  values for <code>serverCerts</code> and <code>clientAuth</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>Specify a list of sources from which to configure server TLS certificates.
The <code>serverCerts</code> list is order-dependent, it means that the first item in the list determines the certificate that Central uses by default, when there is no matching SNI (Server Name Indication).
You can use this to specify multiple certificates and Central automatically selects the right certificate based on SNI.
Acceptable values are:
<div class="ulist">
<ul>
<li>
<p><code>default</code>: use the already configured custom TLS certificate if it exists.</p>
</li>
<li>
<p><code>service</code>: use the internal service certificate that  Red Hat Advance Cluster Security for Kuberenetes generates.</p>
</li>
</ul>
</div></td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Use it to configure the behavior of the TLS-enabled endpoint&#8217;s client certificate authentication.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>Use <code>true</code> to only allow clients with a valid client certificate.
The default value is <code>false</code>.
You can use <code>true</code> in conjunction with a the <code>certAuthorities</code> setting of <code>service</code> to only allow Red Hat Advance Cluster Security for Kuberenetes services to connect to this endpoint.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>A list of CA to verify client certificates. The default value is <code>["service", "user"]</code>.
The <code>certAuthorities</code> list is order-independent, it means that the position of the items in this list does not matter.
Also, setting it as empty list <code>[]</code> disables client certificate authentication for the endpoint, which is different from leaving this value unset.
Acceptable values are:
<div class="ulist">
<ul>
<li>
<p><code>service</code>: CA for service certificates that Red Hat Advance Cluster Security for Kuberenetes generates.</p>
</li>
<li>
<p><code>user</code>: CAs configured by PKI authentication providers.</p>
</li>
</ul>
</div></td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-endpoints-new-install_configure-endpoints"><a class="anchor" href="#configure-endpoints-new-install_configure-endpoints"></a>Configuring endpoints during a new installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you install Red Hat Advance Cluster Security for Kuberenetes by using the <code>roxctl</code> CLI, it creates a folder named <code>central-bundle</code>, which contains the necessary YAML manifests and scripts to deploy Central.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>After you generate the <code>central-bundle</code>, open the <code>./central-bundle/central/02-endpoints-config.yaml</code> file.</p>
</li>
<li>
<p>In this file, add your custom YAML configuration under the <code>data:</code> section of the key <code>endpoints.yaml</code>.
Make sure that you maintain a 4 space indentation for the YAML configuration.</p>
</li>
<li>
<p>Continue the installation instructions as usual.
Red Hat Advance Cluster Security for Kuberenetes uses the specified configuration.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you expose any additional ports other than the default port <code>8443</code>, you must create network policies that allow traffic on those additional ports.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure-endpoints-existing_configure-endpoints"><a class="anchor" href="#configure-endpoints-existing_configure-endpoints"></a>Configuring endpoints for an existing instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure endpoints for an existing instance of Red Hat Advance Cluster Security for Kuberenetes.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Download the existing config map:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc -n stackrox get cm/central-endpoints -o go-template='{{index .data "endpoints.yaml"}}'  &gt; &lt;directory_path&gt;/central_endpoints.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>In the downloaded <code>central_endpoints.yaml</code> file, specify your custom YAML configuration.</p>
</li>
<li>
<p>Upload and apply the modified <code>central_endpoints.yaml</code> configuration file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc -n stackrox create cm central-endpoints --from-file=endpoints.yaml=&lt;directory-path&gt;/central-endpoints.yaml -o yaml --dry-run | \
oc label -f - --local -o yaml app.kubernetes.io/name=stackrox | \
oc apply -f -</code></pre>
</div>
</div>
</li>
<li>
<p>Restart Central.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you expose any additional ports other than the default port <code>8443</code>, you must create network policies that allow traffic on those additional ports.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="restart-central_configure-endpoints"><a class="anchor" href="#restart-central_configure-endpoints"></a>Restarting the Central container</h3>
<div class="paragraph _abstract">
<p>You can restart the Central container by killing the Central container or by deleting the Central pod.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Run the following command to kill the Central container:</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must wait for at least 1 minute, until OpenShift Container Platform propagates your changes and restarts the Central container.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc -n stackrox exec deploy/central -c central -- kill 1</code></pre>
</div>
</div>
</li>
<li>
<p>Or, run the following command to delete the Central pod:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc -n stackrox delete pod -lapp=central</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enable-traffic-flow-through-custom-ports_configure-endpoints"><a class="anchor" href="#enable-traffic-flow-through-custom-ports_configure-endpoints"></a>Enabling traffic flow through custom ports</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are exposing a port to another service running in the same cluster or to an ingress controller, you must only allow traffic from the services in your cluster or from the proxy of the ingress controller.
Otherwise, if you are exposing a port by using a load balancer service, you might want to allow traffic from all sources, including external sources. Use the procedure listed in this section to allow traffic from all sources.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Clone the <code>allow-ext-to-central</code> Kubernetes network policy:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-terminal hljs" data-lang="terminal">$ oc -n stackrox get networkpolicy.networking.k8s.io/allow-ext-to-central -o yaml &gt; &lt;directory_path&gt;/allow-ext-to-central-custom-port.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Use it as a reference to create your network policy, and in that policy, specify the port number you want to expose.
Make sure to change the name of your network policy in the <code>metadata</code> section of the YAML file, so that it does not interfere with the built-in <code>allow-ext-to-central</code> policy.</p>
</li>
</ol>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
